# 義務教育5教科クイズ（GitHub Pages向けドキュメント）

## 概要
本アプリは小〜中学校範囲の5教科（国語・数学・英語・理科・社会）から
1回25問をランダム出題し、採点結果・解説・分析（レーダーチャート）と、
端末内の履歴（最近10回＋全期間平均）を表示する静的サイトです。
HTML/CSS/Vanilla JavaScriptのみで動作し、PWA対応でオフラインでも利用できます。

## 画面構成（index.html）
- **トップバー**：
  - ダークモード切替
  - 履歴へ移動
  - 新しいクイズ開始
  - リセット（現在の回答をクリア）
  - 採点
- **ロック解除カード**：
  - 合言葉の入力でクイズを開始
  - 任意の名前入力（採点結果のタイトルに反映）
- **クイズ画面**：
  - 問題番号・タグ（教科/学年帯/難易度/出題パターン）
  - 問題文と選択肢（A〜D）
  - 前へ/次へ
  - 進捗バー・問題ごとの経過時間
- **結果画面**：
  - 得点サマリ
  - 教科別正答率のレーダーチャート
  - 解説（番号クリックで表示）
  - 分析テキスト（教科/難易度/パターン/時間の所見）
  - 履歴（折れ線グラフ/一覧/全削除）

## 主な挙動（app.js）
- **出題ロジック**
  - 5教科×各5問＝計25問を生成
  - 学年帯（小/中）・難易度（基礎/標準/発展）の比率を目標にサンプリング
  - 問題の重複を回避し、同じパターンの連続出題を抑制（常時有効）
- **採点/分析**
  - 正答率・教科別/難易度別内訳・平均時間を計算
  - 正答率をレーダーチャートで可視化
  - 正誤と回答時間の傾向から分析文を生成（時間目安との比較あり）
- **テーマ**
  - ダーク/ライトを `data-theme` で切替
  - 選択はlocalStorageに保存（初回はOS設定を参照）
- **履歴**
  - 採点結果を端末内に保存（最大50件）
  - 直近10回の推移グラフと、全期間の教科別平均を表示

## 問題データ形式（bank.js）
- 1問の基本スキーマ：
  - `sub`：教科（国語/数学/英語/理科/社会）
  - `level`：学年帯（小/中）
  - `diff`：難易度（基礎/標準/発展）
  - `pattern` / `patternGroup`：出題パターン識別子
  - `q`：問題文
  - `c`：選択肢（4件）
  - `a`：正解インデックス（0〜3）
  - `exp`：解説文
- **表の表示**
  - `q.table` に構造化データ（`headers`/`rows` など）を持たせると
    問題文の直後に表を描画
  - 問題文/解説文にMarkdown形式の表（`|` 区切り）を含めても描画

## データ保存（localStorage）
- ロック解除フラグ、履歴、名前、テーマを端末内に保存
- サーバは不要で、同一端末・同一ブラウザ内のみ保持

## ファイル構成
- `index.html`：UI構造・各パネルの配置
- `styles.css`：ライト/ダークテーマ、カード/ボタン/チャートなどのスタイル
- `app.js`：出題・採点・履歴・テーマ・描画ロジック
- `bank.js`：問題バンク（5教科×50問の固定データ）
- `manifest.json` / `sw.js`：PWA用（オフラインキャッシュ）
