# 要件定義（Requirements）

## 対象
- 小学校〜中学校範囲
- 国語 / 数学 / 英語 / 理科 / 社会

## 機能要件

### 1. 出題
- 5教科×各5問の合計25問を生成
- 出題順はランダム
- 同一問題の重複を避ける（uid/内容ベースで重複排除）
- 似た出題の連発を抑制（patternGroupで偏り抑制）
- 難易度比率：基礎30% / 標準40% / 発展30% をなるべく維持（教科内）
- 出題候補が不足する場合は学年/難易度を緩めてフォールバック

### 2. 解答
- 選択肢クリックで回答（A〜D）
- 前へ/次へで移動
- 解答リセットで全問未回答に戻せる
- 各設問の経過時間を計測

### 3. 採点・結果
- 採点後に結果画面を表示
- 表示内容
  - 総合（正答数/25、正答率、合計時間、平均時間）
  - 教科別（正答率、平均時間）
  - 難易度別（正答率、平均時間）
  - レーダーチャート（5教科正答率）
  - 解説（問題番号押下で表示）

### 4. 分析（文章）
- 正誤×時間傾向から所見を生成
- 教科別の強み/弱み、難易度別の弱点を記載
- パターン別の得意/弱点を抽出
- 速すぎる誤答/遅すぎる誤答を目安時間と比較して示す
- 弱点が明確でない場合は「偏りなし」を明記

### 5. 履歴（この端末）
- 採点結果を端末内に保存（ログイン不要）
- 保存上限は50件
- 表示
  - 最近10回の正答率推移（折れ線）
  - 全期間の平均（全体・教科別）
  - 履歴一覧（最新10件）
- 操作
  - 履歴パネル開閉
  - 履歴全削除

### 6. アクセス制御
- 合言葉で解除後に開始可能（簡易ロック）
- 任意の名前入力（未入力の場合は解除後に名前入力を促す）

### 7. テーマ
- ダーク/ライト切替
- 選択状態を端末内に保存
- 初回はOS設定に合わせて初期テーマを決める

### 8. 問題文の表表示
- `q.table`（構造化）またはMarkdown表の描画に対応

## 非機能要件
- GitHub Pages上で動作（サーバ不要）
- PC/スマホで利用可能（レスポンシブ）
- 更新反映（SWキャッシュ）対策の手順を提供

## 制約・品質方針
- 履歴は同一端末内のみ（同期しない）
- 社会・理科は誤情報回避のため固定問題中心で増量
- 選択肢は「実際に迷いそう」かつ倫理・事実関係が破綻しないこと
